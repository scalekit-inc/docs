import InstallSDK from '@site/docs/sso/templates/_install-sdk.md';

# Quickstart
<Subtitle>Automate User Provisioning and Deprovisioning</Subtitle>

Enterprises need to automatically provision and de-provision employee access to applications to ensure security. Scalekit simplifies this process by providing a single interface to your app, abstracting the complexities of various directory providers.

With Scalekit, you can:
- Use **Webhooks** to listen to events from your customer's directory provider
- Consume **REST APIs** to list users, groups, and directories on-demand

<figure className="width-75">
![](@site/docs/dir-sync/assets/1-quickstart-dir-sync.png)
<figcaption></figcaption>
</figure>

Scalekit enables you to sync user accounts with the latest data in the directory provider. This allows you to:
- Create accounts for new hires during onboarding
- Deactivate accounts when employees depart
- Adjust access levels as employees change roles

## Realtime User Provisioning with Webhooks

### 1. Create a Webhook Endpoint

To receive realtime events from directory providers, create a webhook endpoint and register it in the Scalekit dashboard.

<Tabs groupId="tech-stack" queryString>
<TabItem value="nodejs" label="Next.js">

```javascript showLineNumbers
import { NextRequest, NextResponse } from 'next/server';

/**
 * Webhook Endpoint using Next.js App Router v14.2
 * @endpoint /api/webhook/user-access
 * app/api
 * └── webhook
 *     └── user-access
 *         └── route.ts
 */

export async function POST(req: NextRequest) {
  // Parse the JSON body of the request
  const event = await req.json();

  // Destructure to get necessary data from the event
  const { email, name } = event.data;

  // Call a function to perform business logic
  await createUserAccount(email, name);

  // Return a JSON response with a status code of 200
  return NextResponse.json({ status: 200 });
}
```

</TabItem>
</Tabs>

In this example, the endpoint URL is  `https://www.hero-saas.app/api/webhook/user-access`.

When the endpoint receives an HTTP POST request with event data, it extracts the name and email from the payload and calls <SimpleCode>createUserAccount()</SimpleCode> to perform the necessary business logic — in this case, creating a user account.

### 2. Register Webhook Endpoint

First, navigate to the "Webhooks" tab in the Scalekit Dashboard. Click on the "+Add Endpoint" button and enter the endpoint URL along with a meaningful description. Finally, select the desired event types, such as <SimpleCode>scalekit.dir.user.*</SimpleCode>, to subscribe to the relevant events.

<figure className="width-75">
  ![](@site/docs/dir-sync/assets/2-quickstart-dir-sync.png)
</figure>


Refer to the [API reference](/apis#tag/Webhooks) for the list of all available event types.

Click "Create." Once registered, the webhook endpoint will start receiving event payloads from the directory providers.

### 3. Receive Event Payloads

Scalekit sends event payloads to your app for consumption and standardizes the payload structure across different directory providers your customers may use. Since we subscribed to user events, let's log an example of a new hire gaining access to your app when Scalekit sends a user creation event.

<Tabs groupId="tech-stack" queryString>
<TabItem value="nextjs" label="Next.js">

```javascript showLineNumbers
const event = await req.json();
console.log(event)
```

</TabItem>

<TabItem value="nodejs" label="Node.js">

```javascript showLineNumbers
const event = await req.json();
console.log(event)
```

</TabItem>
</Tabs>

Here is the response you receive from Scalekit when a new user is assigned access to your app:

<CodeWithHeader title="User Creation Event Payload">


<JsonViewer src={{
  "data": {
    "active": true,
    "division": "Engineering",
    "dp_id": "00ujrox2diV2lNQQi5d7",
    "email": "santhosh@acmecorp.com",
    "family_name": "Jegan",
    "given_name": "Santhosh",
    "groups": null,
    "id": "diruser_38065705475637839",
    "locale": "en-US",
    "name": "Santhosh Jegan",
    "organization_id": "org_38065303543874127",
    "preferred_username": "santhosh@acmecorp.com",
    "raw_attributes": {
      "active": true,
      "displayName": "Santhosh Jegan",
      "emails": [
        { "primary": true, "type": "work", "value": "santhosh@acmecorp.com" }
      ],
      "externalId": "00ujrox2diV2lNQQi5d7",
      "locale": "en-US",
      "name": { "familyName": "Jegan", "givenName": "Santhosh" },
      "password": "Fg1hy7bY",
      "urn:ietf:params:scim:schemas:extension:enterprise:2.0:User": {
        "division": "Engineering"
      },
      "userName": "santhosh@acmecorp.com"
    }
  },
  "environment_id": "env_33245698191261706",
  "id": "evt_38073034552115294",
  "object": "DirectoryUser",
  "occurred_at": "2024-09-19T15:41:37.002602567Z",
  "organization_id": "org_38065303543874127",
  "spec_version": "1",
  "type": "scalekit.dir.user.create"
}} />

</CodeWithHeader>

You have successfully created a webhook endpoint in your app, registered it with Scalekit, and received event payloads to support your business use cases. Now, let's explore another approach where we use APIs instead of Webhooks!

## On-Demand User Provisioning with REST APIs

_Coming soon_