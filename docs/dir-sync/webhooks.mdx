# Webhooks

Webhooks are powerful tools that allow your application to receive real-time notifications about specific occurrences within the ScaleKit Directory Sync system. Events represent specific actions or changes, while webhooks are the mechanism used to deliver these event notifications to your specified endpoint.

By leveraging webhooks, you can build responsive and dynamic integrations that react immediately to changes in your directory sync data, enabling you to keep your systems in sync and automate user provisioning and deprovisioning.

## Available Webhooks

ScaleKit sends the following webhooks to notify you about important events in the directory sync process:

| Event Type | Description |
|------------|-------------|
| `scalekit.dir.user.create` | Triggered when a new user is created in the directory |
| `scalekit.dir.user.update` | Triggered when an existing user's information is updated |
| `scalekit.dir.user.delete` | Triggered when a user is removed from the directory |
| `scalekit.dir.group.create` | Triggered when a new group is created in the directory |
| `scalekit.dir.group.update` | Triggered when an existing group's information is updated |
| `scalekit.dir.group.delete` | Triggered when a group is removed from the directory |

These webhooks provide you with comprehensive visibility into the state of your directory and allow you to respond to changes in real-time.

### Sample Webhooks Payload

Here's an explanation of the sample event payload for a developer:

This payload represents a webhook event for a user creation in the directory sync system. Let's break down the key components:

1. Event Metadata:
   - `event_spec_ver`: Version of the event specification (currently "1").
   - `category`: Indicates the event category ("dir" for directory-related events).
   - `type`: Specifies the exact event type ("scalekit.dir.user.create" for user creation).
   - `occured_at`: Timestamp of when the event occurred.
   - `source`: The origin of the event (always "scalekit" in this case).
   - `object`: The type of object affected ("directory_user").

2. User Data:
   The `data` object contains detailed information about the created user:
   - `id`: Unique identifier for the directory user.
   - `organization_id`: ID of the organization the user belongs to.
   - `dp_id`: External ID from the identity provider.
   - `preferred_username`: Username from the identity provider.
   - `user_id`: Reserved for future use with user profiles.
   - `email`: User's email address.
   - `active`: Boolean indicating if the user account is active.
   - `name`: Display name of the user.
   - `roles`: Array of role objects assigned to the user.
   - `groups`: Array of group objects the user belongs to.
   - `given_name` and `family_name`: First and last name of the user.
   - `nickname`: User's nickname.
   - `picture`: URL of the user's profile picture.
   - `phone_number`: User's work phone number.
   - `address`: Object containing various address fields.
   - `custom_attributes`: Object for any custom attributes defined for the user.
   - `raw_attributes`: Contains the original payload received from the identity provider.

This comprehensive payload allows you to access a wide range of user information, enabling you to update your systems or trigger specific actions based on the user creation event.

```js
{
  "event_spec_ver": "1",
  "category": "dir",
  "type": "scalekit.dir.user.create",
  "occured_at": "2024-08-21T10:20:17.072Z",
  "source": "scalekit",
  "object": "directory_user",
  "data": {
    "id": "diruser_12312312312312",
    "organization_id": "org_12312312312312",
    "dp_id": "<scim_external_id>",
    "preferrred_username": "<idp_user_name>",
    "user_id": "usr_121312312312312",
    "email": "john.doe@example.com",
    "active": true,
    "name": "John Doe",
    "roles": [
      {
        "role": "billing_admin",
        "name": "Billing Admin"
      }
    ],
    "groups": [
      {
        "id": "dirgroup_12312312312312",
        "name": "Group Name"
      }
    ],
    "given_name": "John",
    "family_name": "Doe",
    "nickname": "Jhonny boy",
    "picture": "https://image.com/profile.jpg",
    "phone_number": "1234567892",
    "address": {
      "postal_code": "64112",
      "state": "Missouri",
      "formatted": "Missouri"
    },
    "custom_attributes": {
      "attribute1": "value1",
      "attribute2": "value2"
    },
    "raw_attributes": {
      // SCIM payload
    }
  }
}
```
