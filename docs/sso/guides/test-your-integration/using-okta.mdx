---
description: Verify SSO Connection using Okta as the test identity provider
---

import Card from "@site/src/components/Card/Card";
import CardList from "@site/src/components/CardList/CardList";

# Test SSO with Okta

<Subtitle>Verify SSO Connection using Okta as the identity provider</Subtitle>

Using our [Quickstart guide](/sso/quickstart), you would have successfully integrated with Scalekit and implement Single Sign-on workflow in your application. Now, its time to test your integration for all possible customer scenarios and take them live.

Before we explain the scenarios that you need to test and validate, signup for an [Okta developer account](https://developer.okta.com/signup/) so that you can verify your SSO integration with Scalekit with Okta as the identity provider.

## Setup your environment for testing

As part of setting up your environment for testing, we will simulate an actual scenario of onboarding an enterprise customer onto Scalekit so that you can recreate exactly what your customers would experience logging into your application via Single Sign-on.

1. Create an organization in [Scalekit Dashboard](https://app.scalekit.com) with an appropriate organization name that reflects your customer's name.
2. Generate an <TooltippedGlossary glossary="Admin Portal" /> link in the overview section of the organization you recently created.
3. Open the Admin Portal link and follow our [Okta Integration guide](/integrations/okta-saml) to setup an active SSO connection using Okta.

:::tip
You can [customize the admin portal](/sso/domain-and-theme-customization) and theme it according to your application's brand guidelines to give a more polished experience to your customers.
:::

Now that you have an active SSO connection, make sure that you have successfully validated the below scenarios.

## Single Sign-on Scenarios to validate

### Scenario 1: SP Initiated SSO

In this workflow, user starts the Single Sign-on flow from your application's login page.

During testing this scenario, you should validate the following:

- User is redirected to the appropriate identity provider by Scalekit based on the authorization_url you provided.
- After the user is authenticated by the identity provider, the user is redirected to the redirect_url endpoint provided in the authorization_url with one time authorization `code` along with `state` parameter you sent in the authorization_url.
- Your application is able to retrieve the user profile details by exchanging the `code` you received in the above step.

### Scenario 2: IdP Initiated SSO

In this workflow, user is already logged in the identity provider and starts the Single Sign-on flow from their idp. See the below diagram to understand the end-end workflow.

<figure>
  ![IdP initiated SSO
  workflow](@site/docs/sso/assets/guides/idp-initiated-sso.png)
  <figcaption>IdP initiated SSO workflow</figcaption>
</figure>

During testing this scenario, you should validate the following:

- User is redirected to the default redirect_url endpoint configured in the Scalekit Dashboard with parameters related to connection as request parameters.
- Your application should be able to detect that this is an IdP initiated SSO based on the request parameters received in the earlier step and use those parameters to initiate a new SP initiated SSO workflow.
- User is redirected to the appropriate identity provider by Scalekit based on the authorization_url you provided.
- After the user is authenticated by the identity provider, the user is redirected to the redirect_url endpoint provided in the authorization_url with one time authorization `code` along with `state` parameter you sent in the authorization_url.
- Your application is able to retrieve the user profile details by exchanging the `code` you received in the above step.

### Scenario 3: Handling Errors

Sometimes, user login via SSO could fail because of improper SSO configuration, or incomplete user profile data or incomplete integration with Scalekit.

Please go through the possible [error codes](/sso/guides/setup-sso/error-handling) and recommend you strongly to handle these errors and show appropriate error message to your users.

## Next Steps

Once you have successfully validated all these scenarios, you are now ready to go live. Visit our [Launch Checklist](/sso/launch-checklist) guide before you start onboarding real customers.
