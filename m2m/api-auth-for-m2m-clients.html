<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-m2m/api-auth-for-m2m-clients" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">API authentication for M2M clients | Scalekit Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.scalekit.com/m2m/api-auth-for-m2m-clients"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="documentation, authentication, single sign-on, sso, saml, oidc, oauth2, enterprise"><meta data-rh="true" property="twitter:card" content="summary_large_image"><meta data-rh="true" property="twitter:title" content="Home | Scalekit Docs"><meta data-rh="true" property="twitter:desription" content="Learn how to implement  authentication capabilities through our quick start guides, SDKs and code samples"><meta data-rh="true" property="twitter:image" content="/img/docs_og.png"><meta data-rh="true" property="og:desription" content="Learn how to implement  authentication capabilities through our quick start guides, SDKs and code samples"><meta data-rh="true" property="og:image" content="/img/docs_og.png"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="API authentication for M2M clients | Scalekit Docs"><meta data-rh="true" name="description" content="This guide explains how your application can validate API requests from Machine-2-Machine (M2M) clients using Scalekit&#x27;s M2M authentication system."><meta data-rh="true" property="og:description" content="This guide explains how your application can validate API requests from Machine-2-Machine (M2M) clients using Scalekit&#x27;s M2M authentication system."><link data-rh="true" rel="icon" href="https://cdn.prod.website-files.com/65b87d98fa638289e10b8f61/67ab35acf2f180e0fe0a94a8_S%20Icon%20-%20Black%20-%2032x32.png"><link data-rh="true" rel="canonical" href="https://docs.scalekit.com/m2m/api-auth-for-m2m-clients"><link data-rh="true" rel="alternate" href="https://docs.scalekit.com/m2m/api-auth-for-m2m-clients" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.scalekit.com/m2m/api-auth-for-m2m-clients" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://7554BDRAJD-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-N4QQB5CB",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><link rel="stylesheet" href="/assets/css/styles.444b9743.css">
<script src="/assets/js/runtime~main.fbdbcd32.js" defer="defer"></script>
<script src="/assets/js/main.1707b345.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N4QQB5CB" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/scalekit_docs_logo.svg" alt="Scalekit Docs" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="https://assets-global.website-files.com/65b87d98fa638289e10b8f61/65c269053d86c92e0cf91db5_scalekit-logo.svg" alt="Scalekit Docs" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link sso" href="/sso/overview">SSO</a><a class="navbar__item navbar__link scim" href="/scim/quickstart">SCIM Provisioning</a><a aria-current="page" class="navbar__item navbar__link m2m navbar__link--active" href="/m2m/overview">M2M</a><a class="navbar__item navbar__link" href="/sdks">SDKs</a><a class="navbar__item navbar__link" href="/apis">API</a><a class="navbar__item navbar__link" href="/integrations">Integrations</a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a href="https://app.scalekit.com/ws/signup" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link loginLink">Start building auth</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item"><div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item"><span class="text--uppercase text--light sidenav-category-heading">Getting Started</span></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/m2m/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/m2m/quickstart">M2M Quickstart</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/scalekit-developers/gists/tree/main/m2m" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">View code examples<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item"><div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item"><span class="text--uppercase text--light sidenav-category-heading">Learn M2M Concepts</span></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/m2m/m2m-basics">M2M authentication explained</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/m2m/api-auth-for-m2m-clients">Authenticate M2M clients</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item"><div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item"><span class="text--uppercase text--light sidenav-category-heading">How-to Guides</span></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/m2m/authenticate-scalekit-api">Authenticate with Scalekit API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/m2m/external-ids-and-metadata">Manage organization identifiers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/m2m/scopes">Configure client scopes</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Authenticate M2M clients</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>API authentication for M2M clients</h1></header>
<p>This guide explains how your application can validate API requests from Machine-2-Machine (M2M) clients using Scalekit&#x27;s M2M authentication system.
This guide explains the authentication flow, from obtaining access tokens to validating requests using JSON Web Key Sets (JWKS).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-m2m-clients-authenticate-with-your-api">How M2M clients authenticate with your API<a href="#how-m2m-clients-authenticate-with-your-api" class="hash-link" aria-label="Direct link to How M2M clients authenticate with your API" title="Direct link to How M2M clients authenticate with your API">​</a></h2>
<p>Every Scalekit environment functions as an Authorization Server. M2M clients authenticate using client credentials with this server.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storing-client-credentials">Storing client credentials<a href="#storing-client-credentials" class="hash-link" aria-label="Direct link to Storing client credentials" title="Direct link to Storing client credentials">​</a></h3>
<p>M2M clients must securely store their credentials in environment variables:</p>
<div class="scalar-card"><div class="scalar-card-content scalar-card--muted scalar-card-header"><div class="scalar-card-header-slots"><div class="scalar-card-header-slot scalar-card-header-title">Environment variables</div></div></div><div class="scalar-card-content scalar-card--muted custom-scroll"><div><div class="CodeBlock_WzW2"><div class="content_jaVp"><pre class="pre_H8NU shiki"><code class="language-sh"><span class="line"><span style="color:#E45649;--shiki-dark:#E1E4E8">YOURAPP_ENVIRONMENT_URL</span><span style="color:#383A42;--shiki-dark:#F97583">=</span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&quot;&lt;YOURAPP_SCALEKIT_ENVIRONMENT_URL&gt;&quot;</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E1E4E8">YOURAPP_CLIENT_ID</span><span style="color:#383A42;--shiki-dark:#F97583">=</span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&quot;&lt;YOURAPP_CLIENT_ID&gt;&quot;</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E1E4E8">YOURAPP_CLIENT_SECRET</span><span style="color:#383A42;--shiki-dark:#F97583">=</span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&quot;&lt;YOURAPP_CLIENT_SECRET&gt;&quot;</span></span>
<span class="line"></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn button_xRi0"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="obtaining-access-tokens">Obtaining access tokens<a href="#obtaining-access-tokens" class="hash-link" aria-label="Direct link to Obtaining access tokens" title="Direct link to Obtaining access tokens">​</a></h3>
<p>To authenticate API requests, clients must first obtain an access token from your authorization server using the Token endpoint:</p>
<div class="scalar-card"><div class="scalar-card-content scalar-card--muted scalar-card-header"><div class="scalar-card-header-slots"><div class="scalar-card-header-slot scalar-card-header-title">Token endpoint</div></div></div><div class="scalar-card-content scalar-card--muted custom-scroll"><div><div class="CodeBlock_WzW2"><div class="content_jaVp"><pre class="pre_H8NU shiki"><code class="language-sh"><span class="line"><span style="color:#4078F2;--shiki-dark:#B392F0">https://</span><span style="color:#383A42;--shiki-dark:#E1E4E8">&lt;YOURAPP_SCALEKIT_ENVIRONMENT_URL&gt;/oauth/token</span></span>
<span class="line"></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn button_xRi0"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<p>The client sends their credentials to this endpoint:</p>
<div class="scalar-card"><div class="scalar-card-content scalar-card--muted scalar-card-header"><div class="scalar-card-header-slots"><div class="scalar-card-header-slot scalar-card-header-title">Token request</div></div></div><div class="scalar-card-content scalar-card--muted custom-scroll"><div><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">cURL</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Python</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="CodeBlock_WzW2"><div class="content_jaVp"><pre class="pre_H8NU shiki"><code class="language-sh"><span class="line"><span style="color:#4078F2;--shiki-dark:#B392F0">curl</span><span style="color:#986801;--shiki-dark:#79B8FF"> -X</span><span style="color:#50A14F;--shiki-dark:#9ECBFF"> POST</span><span style="color:#0184BC;--shiki-dark:#79B8FF"> \</span></span>
<span class="line"><span style="color:#50A14F;--shiki-dark:#9ECBFF">  &quot;https://&lt;YOURAPP_SCALEKIT_ENVIRONMENT_URL&gt;/oauth/token&quot;</span><span style="color:#0184BC;--shiki-dark:#79B8FF"> \</span></span>
<span class="line"><span style="color:#986801;--shiki-dark:#79B8FF">  -H</span><span style="color:#50A14F;--shiki-dark:#9ECBFF"> &quot;Content-Type: application/x-www-form-urlencoded&quot;</span><span style="color:#0184BC;--shiki-dark:#79B8FF"> \</span></span>
<span class="line"><span style="color:#986801;--shiki-dark:#79B8FF">  -d</span><span style="color:#50A14F;--shiki-dark:#9ECBFF"> &quot;grant_type=client_credentials&quot;</span><span style="color:#0184BC;--shiki-dark:#79B8FF"> \</span></span>
<span class="line"><span style="color:#986801;--shiki-dark:#79B8FF">  -d</span><span style="color:#50A14F;--shiki-dark:#9ECBFF"> &quot;client_id=&lt;YOURAPP_CLIENT_ID&gt;&quot;</span><span style="color:#0184BC;--shiki-dark:#79B8FF"> \</span></span>
<span class="line"><span style="color:#986801;--shiki-dark:#79B8FF">  -d</span><span style="color:#50A14F;--shiki-dark:#9ECBFF"> &quot;client_secret=&lt;YOURAPP_CLIENT_SECRET&gt;&quot;</span><span style="color:#0184BC;--shiki-dark:#79B8FF"> \</span></span>
<span class="line"><span style="color:#986801;--shiki-dark:#79B8FF">  -d</span><span style="color:#50A14F;--shiki-dark:#9ECBFF"> &quot;scope=openid profile email&quot;</span></span>
<span class="line"></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn button_xRi0"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="CodeBlock_WzW2"><div class="content_jaVp"><pre class="pre_H8NU shiki"><code class="language-python"><span class="line"><span style="color:#A626A4;--shiki-dark:#F97583">import</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> os</span></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#F97583">import</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> json</span></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#F97583">import</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> requests</span></span>
<span class="line"></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">env_url </span><span style="color:#383A42;--shiki-dark:#F97583">=</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> os.environ[</span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&#x27;YOURAPP_SCALEKIT_ENVIRONMENT_URL&#x27;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#F97583">def</span><span style="color:#4078F2;--shiki-dark:#B392F0"> get_m2m_access_token</span><span style="color:#383A42;--shiki-dark:#E1E4E8">():</span></span>
<span class="line"><span style="color:#50A14F;--shiki-dark:#9ECBFF">    &quot;&quot;&quot;Request an access token for M2M client authentication.&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">    headers </span><span style="color:#383A42;--shiki-dark:#F97583">=</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> {</span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&quot;Content-Type&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">: </span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&quot;application/x-www-form-urlencoded&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">    params </span><span style="color:#383A42;--shiki-dark:#F97583">=</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#50A14F;--shiki-dark:#9ECBFF">        &quot;grant_type&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">: </span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&quot;client_credentials&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#50A14F;--shiki-dark:#9ECBFF">        &quot;client_id&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">: os.environ[</span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&#x27;YOURAPP_SCALEKIT_CLIENT_ID&#x27;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">],</span></span>
<span class="line"><span style="color:#50A14F;--shiki-dark:#9ECBFF">        &quot;client_secret&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">: os.environ[</span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&#x27;YOURAPP_SCALEKIT_CLIENT_SECRET&#x27;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">],</span></span>
<span class="line"><span style="color:#50A14F;--shiki-dark:#9ECBFF">        &quot;scope&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">: </span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&quot;openid profile email&quot;</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">    response </span><span style="color:#383A42;--shiki-dark:#F97583">=</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> requests.post(</span></span>
<span class="line"><span style="color:#986801;--shiki-dark:#FFAB70">        url</span><span style="color:#383A42;--shiki-dark:#F97583">=</span><span style="color:#A626A4;--shiki-dark:#F97583">f</span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&quot;</span><span style="color:#986801;--shiki-dark:#79B8FF">{</span><span style="color:#383A42;--shiki-dark:#E1E4E8">env_url</span><span style="color:#986801;--shiki-dark:#79B8FF">}</span><span style="color:#50A14F;--shiki-dark:#9ECBFF">/oauth/token&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#986801;--shiki-dark:#FFAB70">        headers</span><span style="color:#383A42;--shiki-dark:#F97583">=</span><span style="color:#383A42;--shiki-dark:#E1E4E8">headers,</span></span>
<span class="line"><span style="color:#986801;--shiki-dark:#FFAB70">        data</span><span style="color:#383A42;--shiki-dark:#F97583">=</span><span style="color:#383A42;--shiki-dark:#E1E4E8">params,</span></span>
<span class="line"><span style="color:#986801;--shiki-dark:#FFAB70">        verify</span><span style="color:#383A42;--shiki-dark:#F97583">=</span><span style="color:#986801;--shiki-dark:#79B8FF">True</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">    )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">    access_token </span><span style="color:#383A42;--shiki-dark:#F97583">=</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> response.json().get(</span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&#x27;access_token&#x27;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#F97583">    return</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> access_token</span></span>
<span class="line"></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn button_xRi0"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div></div></div>
<p>The server returns a JSON response containing the access token:</p>
<div class="scalar-card"><div class="scalar-card-content scalar-card--muted scalar-card-header"><div class="scalar-card-header-slots"><div class="scalar-card-header-slot scalar-card-header-title">Token response</div></div></div><div class="scalar-card-content scalar-card--muted custom-scroll"><div><div class="CodeBlock_WzW2"><div class="content_jaVp"><pre class="pre_H8NU shiki"><code class="language-json"><span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#79B8FF">  &quot;access_token&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">: </span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&quot;&lt;YOURAPP_ACCESS_TOKEN&gt;&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#79B8FF">  &quot;token_type&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">: </span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&quot;Bearer&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#79B8FF">  &quot;expires_in&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">: </span><span style="color:#986801;--shiki-dark:#79B8FF">86399</span><span style="color:#383A42;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#79B8FF">  &quot;scope&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">: </span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&quot;openid&quot;</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn button_xRi0"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody><tr><td><code class="simple_code">access_token</code></td><td>Token for authenticating API requests</td></tr><tr><td><code class="simple_code">token_type</code></td><td>Always &quot;Bearer&quot; for this flow</td></tr><tr><td><code class="simple_code">expires_in</code></td><td>Token validity period in seconds (typically 24 hours)</td></tr><tr><td><code class="simple_code">scope</code></td><td>Authorized scopes for this token</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-access-tokens">Using access tokens<a href="#using-access-tokens" class="hash-link" aria-label="Direct link to Using access tokens" title="Direct link to Using access tokens">​</a></h3>
<p>After obtaining the access token, clients include it in the Authorization header of their API requests:</p>
<div class="scalar-card"><div class="scalar-card-content scalar-card--muted scalar-card-header"><div class="scalar-card-header-slots"><div class="scalar-card-header-slot scalar-card-header-title">API request with access token</div></div></div><div class="scalar-card-content scalar-card--muted custom-scroll"><div><div class="CodeBlock_WzW2"><div class="content_jaVp"><pre class="pre_H8NU shiki"><code class="language-sh"><span class="line"><span style="color:#4078F2;--shiki-dark:#B392F0">curl</span><span style="color:#986801;--shiki-dark:#79B8FF"> --request</span><span style="color:#50A14F;--shiki-dark:#9ECBFF"> GET</span><span style="color:#50A14F;--shiki-dark:#9ECBFF"> &quot;https://&lt;your-api-endpoint&gt;&quot;</span><span style="color:#0184BC;--shiki-dark:#79B8FF"> \</span></span>
<span class="line"><span style="color:#986801;--shiki-dark:#79B8FF">  -H</span><span style="color:#50A14F;--shiki-dark:#9ECBFF"> &quot;Content-Type: application/json&quot;</span><span style="color:#0184BC;--shiki-dark:#79B8FF"> \</span></span>
<span class="line"><span style="color:#986801;--shiki-dark:#79B8FF">  -H</span><span style="color:#50A14F;--shiki-dark:#9ECBFF"> &quot;Authorization: Bearer &lt;YOURAPP_ACCESS_TOKEN&gt;&quot;</span></span>
<span class="line"></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn button_xRi0"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="validating-access-tokens">Validating access tokens<a href="#validating-access-tokens" class="hash-link" aria-label="Direct link to Validating access tokens" title="Direct link to Validating access tokens">​</a></h2>
<p>Your API server must validate access tokens before processing requests. Scalekit uses JSON Web Tokens (JWTs) signed with RSA keys, which you validate using the JSON Web Key Set (JWKS) endpoint.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="retrieving-jwks">Retrieving JWKS<a href="#retrieving-jwks" class="hash-link" aria-label="Direct link to Retrieving JWKS" title="Direct link to Retrieving JWKS">​</a></h3>
<p>Your application should fetch the public keys from the JWKS endpoint:</p>
<div class="scalar-card"><div class="scalar-card-content scalar-card--muted scalar-card-header"><div class="scalar-card-header-slots"><div class="scalar-card-header-slot scalar-card-header-title">JWKS endpoint</div></div></div><div class="scalar-card-content scalar-card--muted custom-scroll"><div><div class="CodeBlock_WzW2"><div class="content_jaVp"><pre class="pre_H8NU shiki"><code class="language-sh"><span class="line"><span style="color:#4078F2;--shiki-dark:#B392F0">https://</span><span style="color:#383A42;--shiki-dark:#E1E4E8">&lt;YOURAPP_ENVIRONMENT_URL&gt;/keys</span></span>
<span class="line"></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn button_xRi0"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<div class="scalar-card"><div class="scalar-card-content scalar-card--muted scalar-card-header"><div class="scalar-card-header-slots"><div class="scalar-card-header-slot scalar-card-header-title">JWKS response</div></div></div><div class="scalar-card-content scalar-card--muted custom-scroll"><div><div class="CodeBlock_WzW2"><div class="content_jaVp"><pre class="pre_H8NU shiki"><code class="language-json"><span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#79B8FF">  &quot;keys&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">: [</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">    {</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#79B8FF">      &quot;use&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">: </span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&quot;sig&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#79B8FF">      &quot;kty&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">: </span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&quot;RSA&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#79B8FF">      &quot;kid&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">: </span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&quot;snk_58327480989122566&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#79B8FF">      &quot;alg&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">: </span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&quot;RS256&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#79B8FF">      &quot;n&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">: </span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&quot;wUaqIj3pIE_zfGN9u4GySZs862F-0Kl-..&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#79B8FF">      &quot;e&quot;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">: </span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&quot;AQAB&quot;</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">  ]</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn button_xRi0"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="token-validation-process">Token validation process<a href="#token-validation-process" class="hash-link" aria-label="Direct link to Token validation process" title="Direct link to Token validation process">​</a></h3>
<p>When your API receives a request with a JWT, follow these steps:</p>
<ol>
<li>Extract the token from the Authorization header</li>
<li>Fetch the JWKS from the endpoint</li>
<li>Use the public key from JWKS to verify the token&#x27;s signature</li>
<li>Validate the token&#x27;s claims (issuer, audience, expiration)</li>
</ol>
<p>This example shows how to fetch JWKS data:</p>
<div class="scalar-card"><div class="scalar-card-content scalar-card--muted scalar-card-header"><div class="scalar-card-header-slots"><div class="scalar-card-header-slot scalar-card-header-title">Fetch JWKS with cURL</div></div></div><div class="scalar-card-content scalar-card--muted custom-scroll"><div><div class="CodeBlock_WzW2"><div class="content_jaVp"><pre class="pre_H8NU shiki"><code class="language-sh"><span class="line"><span style="color:#4078F2;--shiki-dark:#B392F0">curl</span><span style="color:#986801;--shiki-dark:#79B8FF"> -s</span><span style="color:#50A14F;--shiki-dark:#9ECBFF"> &quot;https://&lt;YOURAPP_ENVIRONMENT_URL&gt;/keys&quot;</span><span style="color:#383A42;--shiki-dark:#F97583"> |</span><span style="color:#4078F2;--shiki-dark:#B392F0"> jq</span></span>
<span class="line"></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn button_xRi0"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<div class="scalar-card"><div class="scalar-card-content scalar-card--muted scalar-card-header"><div class="scalar-card-header-slots"><div class="scalar-card-header-slot scalar-card-header-title">Token Validation</div></div></div><div class="scalar-card-content scalar-card--muted custom-scroll"><div><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">jwksClient (Node.js)</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Python</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="CodeBlock_WzW2"><div class="content_jaVp"><pre class="pre_H8NU shiki"><code class="language-javascript"><span class="line"><span style="color:#A626A4;--shiki-dark:#F97583">const</span><span style="color:#986801;--shiki-dark:#79B8FF"> express</span><span style="color:#0184BC;--shiki-dark:#F97583"> =</span><span style="color:#4078F2;--shiki-dark:#B392F0"> require</span><span style="color:#383A42;--shiki-dark:#E1E4E8">(</span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&#x27;express&#x27;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#F97583">const</span><span style="color:#986801;--shiki-dark:#79B8FF"> jwt</span><span style="color:#0184BC;--shiki-dark:#F97583"> =</span><span style="color:#4078F2;--shiki-dark:#B392F0"> require</span><span style="color:#383A42;--shiki-dark:#E1E4E8">(</span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&#x27;jsonwebtoken&#x27;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#F97583">const</span><span style="color:#986801;--shiki-dark:#79B8FF"> jwksClient</span><span style="color:#0184BC;--shiki-dark:#F97583"> =</span><span style="color:#4078F2;--shiki-dark:#B392F0"> require</span><span style="color:#383A42;--shiki-dark:#E1E4E8">(</span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&#x27;jwks-rsa&#x27;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#F97583">const</span><span style="color:#986801;--shiki-dark:#79B8FF"> app</span><span style="color:#0184BC;--shiki-dark:#F97583"> =</span><span style="color:#4078F2;--shiki-dark:#B392F0"> express</span><span style="color:#383A42;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0A1A7;--shiki-dark:#6A737D;font-style:italic;--shiki-dark-font-style:inherit">// Initialize JWKS client</span></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#F97583">const</span><span style="color:#986801;--shiki-dark:#79B8FF"> client</span><span style="color:#0184BC;--shiki-dark:#F97583"> =</span><span style="color:#4078F2;--shiki-dark:#B392F0"> jwksClient</span><span style="color:#383A42;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E1E4E8">  jwksUri</span><span style="color:#0184BC;--shiki-dark:#E1E4E8">:</span><span style="color:#50A14F;--shiki-dark:#9ECBFF"> `https://&lt;YOURAPP_ENVIRONMENT_URL&gt;/keys`</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0A1A7;--shiki-dark:#6A737D;font-style:italic;--shiki-dark-font-style:inherit">// Function to get signing key</span></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#F97583">function</span><span style="color:#4078F2;--shiki-dark:#B392F0"> getKey</span><span style="color:#383A42;--shiki-dark:#E1E4E8">(</span><span style="color:#383A42;--shiki-dark:#FFAB70">header</span><span style="color:#383A42;--shiki-dark:#E1E4E8">, </span><span style="color:#383A42;--shiki-dark:#FFAB70">callback</span><span style="color:#383A42;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">  client.</span><span style="color:#4078F2;--shiki-dark:#B392F0">getSigningKey</span><span style="color:#383A42;--shiki-dark:#E1E4E8">(header.</span><span style="color:#E45649;--shiki-dark:#E1E4E8">kid</span><span style="color:#383A42;--shiki-dark:#E1E4E8">, </span><span style="color:#A626A4;--shiki-dark:#F97583">function</span><span style="color:#383A42;--shiki-dark:#E1E4E8">(</span><span style="color:#383A42;--shiki-dark:#FFAB70">err</span><span style="color:#383A42;--shiki-dark:#E1E4E8">, </span><span style="color:#383A42;--shiki-dark:#FFAB70">key</span><span style="color:#383A42;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#F97583">    if</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> (err) </span><span style="color:#A626A4;--shiki-dark:#F97583">return</span><span style="color:#4078F2;--shiki-dark:#B392F0"> callback</span><span style="color:#383A42;--shiki-dark:#E1E4E8">(err);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#F97583">    const</span><span style="color:#986801;--shiki-dark:#79B8FF"> signingKey</span><span style="color:#0184BC;--shiki-dark:#F97583"> =</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> key.</span><span style="color:#E45649;--shiki-dark:#E1E4E8">publicKey</span><span style="color:#0184BC;--shiki-dark:#F97583"> ||</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> key.</span><span style="color:#E45649;--shiki-dark:#E1E4E8">rsaPublicKey</span><span style="color:#383A42;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="color:#4078F2;--shiki-dark:#B392F0">    callback</span><span style="color:#383A42;--shiki-dark:#E1E4E8">(</span><span style="color:#986801;--shiki-dark:#79B8FF">null</span><span style="color:#383A42;--shiki-dark:#E1E4E8">, signingKey);</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">  });</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0A1A7;--shiki-dark:#6A737D;font-style:italic;--shiki-dark-font-style:inherit">// Middleware to validate JWT</span></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#F97583">function</span><span style="color:#4078F2;--shiki-dark:#B392F0"> validateJwt</span><span style="color:#383A42;--shiki-dark:#E1E4E8">(</span><span style="color:#383A42;--shiki-dark:#FFAB70">req</span><span style="color:#383A42;--shiki-dark:#E1E4E8">, </span><span style="color:#383A42;--shiki-dark:#FFAB70">res</span><span style="color:#383A42;--shiki-dark:#E1E4E8">, </span><span style="color:#383A42;--shiki-dark:#FFAB70">next</span><span style="color:#383A42;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#A0A1A7;--shiki-dark:#6A737D;font-style:italic;--shiki-dark-font-style:inherit">  // Extract token from header</span></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#F97583">  const</span><span style="color:#986801;--shiki-dark:#79B8FF"> authHeader</span><span style="color:#0184BC;--shiki-dark:#F97583"> =</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> req.</span><span style="color:#E45649;--shiki-dark:#E1E4E8">headers</span><span style="color:#383A42;--shiki-dark:#E1E4E8">.</span><span style="color:#E45649;--shiki-dark:#E1E4E8">authorization</span><span style="color:#383A42;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#F97583">  if</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> (</span><span style="color:#0184BC;--shiki-dark:#F97583">!</span><span style="color:#383A42;--shiki-dark:#E1E4E8">authHeader </span><span style="color:#0184BC;--shiki-dark:#F97583">||</span><span style="color:#0184BC;--shiki-dark:#F97583"> !</span><span style="color:#383A42;--shiki-dark:#E1E4E8">authHeader.</span><span style="color:#4078F2;--shiki-dark:#B392F0">startsWith</span><span style="color:#383A42;--shiki-dark:#E1E4E8">(</span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&#x27;Bearer &#x27;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">)) {</span></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#F97583">    return</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> res.</span><span style="color:#4078F2;--shiki-dark:#B392F0">status</span><span style="color:#383A42;--shiki-dark:#E1E4E8">(</span><span style="color:#986801;--shiki-dark:#79B8FF">401</span><span style="color:#383A42;--shiki-dark:#E1E4E8">).</span><span style="color:#4078F2;--shiki-dark:#B392F0">json</span><span style="color:#383A42;--shiki-dark:#E1E4E8">({ </span><span style="color:#E45649;--shiki-dark:#E1E4E8">error</span><span style="color:#0184BC;--shiki-dark:#E1E4E8">:</span><span style="color:#50A14F;--shiki-dark:#9ECBFF"> &#x27;Missing authorization token&#x27;</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#F97583">  const</span><span style="color:#986801;--shiki-dark:#79B8FF"> token</span><span style="color:#0184BC;--shiki-dark:#F97583"> =</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> authHeader.</span><span style="color:#4078F2;--shiki-dark:#B392F0">split</span><span style="color:#383A42;--shiki-dark:#E1E4E8">(</span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&#x27; &#x27;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">)[</span><span style="color:#986801;--shiki-dark:#79B8FF">1</span><span style="color:#383A42;--shiki-dark:#E1E4E8">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0A1A7;--shiki-dark:#6A737D;font-style:italic;--shiki-dark-font-style:inherit">  // Verify token</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">  jwt.</span><span style="color:#4078F2;--shiki-dark:#B392F0">verify</span><span style="color:#383A42;--shiki-dark:#E1E4E8">(token, getKey, {</span></span>
<span class="line"><span style="color:#E45649;--shiki-dark:#E1E4E8">    algorithms</span><span style="color:#0184BC;--shiki-dark:#E1E4E8">:</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> [</span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&#x27;RS256&#x27;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">  }, (</span><span style="color:#383A42;--shiki-dark:#FFAB70">err</span><span style="color:#383A42;--shiki-dark:#E1E4E8">, </span><span style="color:#383A42;--shiki-dark:#FFAB70">decoded</span><span style="color:#383A42;--shiki-dark:#E1E4E8">) </span><span style="color:#A626A4;--shiki-dark:#F97583">=&gt;</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#F97583">    if</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> (err) {</span></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#F97583">      return</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> res.</span><span style="color:#4078F2;--shiki-dark:#B392F0">status</span><span style="color:#383A42;--shiki-dark:#E1E4E8">(</span><span style="color:#986801;--shiki-dark:#79B8FF">401</span><span style="color:#383A42;--shiki-dark:#E1E4E8">).</span><span style="color:#4078F2;--shiki-dark:#B392F0">json</span><span style="color:#383A42;--shiki-dark:#E1E4E8">({ </span><span style="color:#E45649;--shiki-dark:#E1E4E8">error</span><span style="color:#0184BC;--shiki-dark:#E1E4E8">:</span><span style="color:#50A14F;--shiki-dark:#9ECBFF"> &#x27;Invalid token&#x27;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">, </span><span style="color:#E45649;--shiki-dark:#E1E4E8">details</span><span style="color:#0184BC;--shiki-dark:#E1E4E8">:</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> err.</span><span style="color:#E45649;--shiki-dark:#E1E4E8">message</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0A1A7;--shiki-dark:#6A737D;font-style:italic;--shiki-dark-font-style:inherit">    // Add decoded token to request object</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">    req.</span><span style="color:#E45649;--shiki-dark:#E1E4E8">user</span><span style="color:#0184BC;--shiki-dark:#F97583"> =</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> decoded;</span></span>
<span class="line"><span style="color:#4078F2;--shiki-dark:#B392F0">    next</span><span style="color:#383A42;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">  });</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0A1A7;--shiki-dark:#6A737D;font-style:italic;--shiki-dark-font-style:inherit">// Apply middleware to protected routes</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">app.</span><span style="color:#4078F2;--shiki-dark:#B392F0">use</span><span style="color:#383A42;--shiki-dark:#E1E4E8">(</span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&#x27;/api&#x27;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">, validateJwt);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0A1A7;--shiki-dark:#6A737D;font-style:italic;--shiki-dark-font-style:inherit">// Example protected route</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">app.</span><span style="color:#4078F2;--shiki-dark:#B392F0">get</span><span style="color:#383A42;--shiki-dark:#E1E4E8">(</span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&#x27;/api/data&#x27;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">, (</span><span style="color:#383A42;--shiki-dark:#FFAB70">req</span><span style="color:#383A42;--shiki-dark:#E1E4E8">, </span><span style="color:#383A42;--shiki-dark:#FFAB70">res</span><span style="color:#383A42;--shiki-dark:#E1E4E8">) </span><span style="color:#A626A4;--shiki-dark:#F97583">=&gt;</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">  res.</span><span style="color:#4078F2;--shiki-dark:#B392F0">json</span><span style="color:#383A42;--shiki-dark:#E1E4E8">({ </span><span style="color:#E45649;--shiki-dark:#E1E4E8">message</span><span style="color:#0184BC;--shiki-dark:#E1E4E8">:</span><span style="color:#50A14F;--shiki-dark:#9ECBFF"> &#x27;Authenticated successfully&#x27;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">, </span><span style="color:#E45649;--shiki-dark:#E1E4E8">userId</span><span style="color:#0184BC;--shiki-dark:#E1E4E8">:</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> req.</span><span style="color:#E45649;--shiki-dark:#E1E4E8">user</span><span style="color:#383A42;--shiki-dark:#E1E4E8">.</span><span style="color:#E45649;--shiki-dark:#E1E4E8">sub</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">app.</span><span style="color:#4078F2;--shiki-dark:#B392F0">listen</span><span style="color:#383A42;--shiki-dark:#E1E4E8">(</span><span style="color:#986801;--shiki-dark:#79B8FF">3000</span><span style="color:#383A42;--shiki-dark:#E1E4E8">, () </span><span style="color:#A626A4;--shiki-dark:#F97583">=&gt;</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">  console.</span><span style="color:#4078F2;--shiki-dark:#B392F0">log</span><span style="color:#383A42;--shiki-dark:#E1E4E8">(</span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&#x27;Server running on port 3000&#x27;</span><span style="color:#383A42;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">});</span></span>
<span class="line"></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn button_xRi0"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="CodeBlock_WzW2"><div class="content_jaVp"><pre class="pre_H8NU shiki"><code class="language-python"><span class="line"><span style="color:#A0A1A7;--shiki-dark:#6A737D;font-style:italic;--shiki-dark-font-style:inherit"># Validate token and get claims using Scalekit SDK</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">claims </span><span style="color:#383A42;--shiki-dark:#F97583">=</span><span style="color:#383A42;--shiki-dark:#E1E4E8"> scalekit_client.validate_access_token_and_get_claims(</span></span>
<span class="line"><span style="color:#986801;--shiki-dark:#FFAB70">  token</span><span style="color:#383A42;--shiki-dark:#F97583">=</span><span style="color:#50A14F;--shiki-dark:#9ECBFF">&quot;&lt;M2M_CLIENT_ACCESS_TOKEN&gt;&quot;</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E1E4E8">  )</span></span>
<span class="line"></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn button_xRi0"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div></div></div>
<p>When implementing token validation:</p>
<ol>
<li>Always verify the token signature using the public key from JWKS</li>
<li>Validate token expiration and required claims</li>
<li>Consider caching JWKS responses to improve performance</li>
<li>Implement token revocation checks for sensitive operations</li>
<li>Use HTTPS for all API endpoints</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sdk-support-status">SDK support status<a href="#sdk-support-status" class="hash-link" aria-label="Direct link to SDK support status" title="Direct link to SDK support status">​</a></h4>
<p>Our <a href="https://github.com/scalekit-inc/scalekit-sdk-python" target="_blank" rel="noopener noreferrer">Python SDK</a> currently includes support for M2M authentication. The support to verify tokens is coming soon to Node, Java, and Go SDKs.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav><div class="feedbackFooter"><hr><div class="docsRating"><div>Is this page helpful?<a class="button button--secondary button--outline btn-outline"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M466.27 286.69C475.04 271.84 480 256 480 236.85c0-44.015-37.218-85.58-85.82-85.58H357.7c4.92-12.81 8.85-28.13 8.85-46.54C366.55 31.936 328.86 0 271.28 0c-61.607 0-58.093 94.933-71.76 108.6-22.747 22.747-49.615 66.447-68.76 83.4H32c-17.673 0-32 14.327-32 32v240c0 17.673 14.327 32 32 32h64c14.893 0 27.408-10.174 30.978-23.95 44.509 1.001 75.06 39.94 177.802 39.94 7.22 0 15.22.01 22.22.01 77.117 0 111.986-39.423 112.94-95.33 13.319-18.425 20.299-43.122 17.34-66.99 9.854-18.452 13.664-40.343 8.99-62.99zm-61.75 53.83c12.56 21.13 1.26 49.41-13.94 57.57 7.7 48.78-17.608 65.9-53.12 65.9h-37.82c-71.639 0-118.029-37.82-171.64-37.82V240h10.92c28.36 0 67.98-70.89 94.54-97.46 28.36-28.36 18.91-75.63 37.82-94.54 47.27 0 47.27 32.98 47.27 56.73 0 39.17-28.36 56.72-28.36 94.54h103.99c21.11 0 37.73 18.91 37.82 37.82.09 18.9-12.82 37.81-22.27 37.81 13.489 14.555 16.371 45.236-5.21 65.62zM88 432c0 13.255-10.745 24-24 24s-24-10.745-24-24 10.745-24 24-24 24 10.745 24 24z"></path></svg> Yes</a><a class="button button--secondary button--outline btn-outline"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M466.27 225.31c4.674-22.647.864-44.538-8.99-62.99 2.958-23.868-4.021-48.565-17.34-66.99C438.986 39.423 404.117 0 327 0c-7 0-15 .01-22.22.01C201.195.01 168.997 40 128 40h-10.845c-5.64-4.975-13.042-8-21.155-8H32C14.327 32 0 46.327 0 64v240c0 17.673 14.327 32 32 32h64c11.842 0 22.175-6.438 27.708-16h7.052c19.146 16.953 46.013 60.653 68.76 83.4 13.667 13.667 10.153 108.6 71.76 108.6 57.58 0 95.27-31.936 95.27-104.73 0-18.41-3.93-33.73-8.85-46.54h36.48c48.602 0 85.82-41.565 85.82-85.58 0-19.15-4.96-34.99-13.73-49.84zM64 296c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zm330.18 16.73H290.19c0 37.82 28.36 55.37 28.36 94.54 0 23.75 0 56.73-47.27 56.73-18.91-18.91-9.46-66.18-37.82-94.54C206.9 342.89 167.28 272 138.92 272H128V85.83c53.611 0 100.001-37.82 171.64-37.82h37.82c35.512 0 60.82 17.12 53.12 65.9 15.2 8.16 26.5 36.44 13.94 57.57 21.581 20.384 18.699 51.065 5.21 65.62 9.45 0 22.36 18.91 22.27 37.81-.09 18.91-16.71 37.82-37.82 37.82z"></path></svg> No</a><div class="hidden feedbackContainer"><textarea rows="3" placeholder="Sorry to hear that. How can we help you?"></textarea><a class="button button--secondary button--outline">Send Feedback</a></div></div></div><div class="footerLink"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><circle cx="256" cy="256" r="208" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></circle><circle cx="256" cy="256" r="80" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></circle><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="m208 54 8 132m80 0 8-132m-96 404 8-132m80 0 8 132m154-250-132 8m0 80 132 8M54 208l132 8m0 80-132 8"></path></svg>Need help? <a href="mailto:support@scalekit.com">Contact Support</a></div><div class="footerLink"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke-miterlimit="10" stroke-width="32" d="M256 80a176 176 0 1 0 176 176A176 176 0 0 0 256 80z"></path><path fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="28" d="M200 202.29s.84-17.5 19.57-32.57C230.68 160.77 244 158.18 256 158c10.93-.14 20.69 1.67 26.53 4.45 10 4.76 29.47 16.38 29.47 41.09 0 26-17 37.81-36.37 50.8S251 281.43 251 296"></path><circle cx="250" cy="348" r="20"></circle></svg>Questions? <a href="mailto:hi@scalekit.com">Contact Us</a></div></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-m2m-clients-authenticate-with-your-api" class="table-of-contents__link toc-highlight">How M2M clients authenticate with your API</a><ul><li><a href="#storing-client-credentials" class="table-of-contents__link toc-highlight">Storing client credentials</a></li><li><a href="#obtaining-access-tokens" class="table-of-contents__link toc-highlight">Obtaining access tokens</a></li><li><a href="#using-access-tokens" class="table-of-contents__link toc-highlight">Using access tokens</a></li></ul></li><li><a href="#validating-access-tokens" class="table-of-contents__link toc-highlight">Validating access tokens</a><ul><li><a href="#retrieving-jwks" class="table-of-contents__link toc-highlight">Retrieving JWKS</a></li><li><a href="#token-validation-process" class="table-of-contents__link toc-highlight">Token validation process</a></li></ul></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>