import { Endpoint } from '@site/src/components/endpoint';

<IntersectingHeader id="tag/Webhooks" title="Webhooks"/>
<div className="row section">
    <div className="col col--6">
        A webhook (also called a web callback or HTTP push API) is a way for Scalekit to provide your applications with real-time information. A webhook delivers data to your applications as it happens, meaning you get data immediately, unlike typical APIs where you would need to poll for data very frequently to get it in real-time. Events represent specific actions or changes, while webhooks are the mechanism used to deliver these event notifications to your specified endpoint.

        By leveraging webhooks, you can build responsive and dynamic integrations that react immediately to changes in Scalekit System, enabling you to keep your systems in sync and automate user lifecycle management and other related use cases.
    </div>
    <div className="col col--6">
        <CodeWithHeader title="List of Events">
            <div className="endpoints">
                <Endpoint
                    key='scalekit.dir.user.create'
                    href='#tag/Webhooks/scalekit.dir.user.create'
                    method='event'
                    label='scalekit.dir.user.create'
                />
                <Endpoint
                    key='scalekit.dir.user.update'
                    href='#tag/Webhooks/scalekit.dir.user.update'
                    method='event'
                    label='scalekit.dir.user.update'
                />
                <Endpoint
                    key='scalekit.dir.user.delete'
                    href='#tag/Webhooks/scalekit.dir.user.delete'
                    method='event'
                    label='scalekit.dir.user.delete'
                />
            </div>
        </CodeWithHeader>
    </div>

</div>
<IntersectingHeader id="tag/Webhooks/object" title="Event Object" subheading="true" classList="ApiCategoryList"/>
<div className="row section">
    <div className="col col--6">
       Every webhook payload has two key components: Event Metadata and Event Data.
       <ul className="ApiReference-Parameters">
            <li className="ApiReference-Parameter header">Event Metadata</li>
            <Parameter attrKey="event_spec_ver" type="string" description="Version of the event specification (currently '1')." />
            <Parameter attrKey="category" type="string" description="Indicates the event category (Example: 'dir' for directory-related events)." />
            <Parameter attrKey="type" type="string" description="Specifies the exact event type (Example: 'scalekit.dir.user.create' for user creation)." />
            <Parameter attrKey="occured_at" type="string" description="Timestamp of when the event occurred." />
            <Parameter attrKey="source" type="string" description="The origin of the event (always 'scalekit' in this case)." />
            <Parameter attrKey="object" type="string" description="The type of object affected (Example: 'directory_user')." />
            <li className="ApiReference-Parameter header">Event Data</li>
            <Parameter attrKey="data" type="object" description="Contains latest object data after the event." />
            <Parameter attrKey="old_data" type="object" description="Contains object data before the event." />
        </ul>
    </div>
    <div className="col col--6">
        <CodeWithHeader title="Sample Event Payload">

        ```json
        {
          "event_spec_ver": "1",
          "category": "dir",
          "type": "scalekit.dir.user.create",
          "occured_at": "2024-08-21T10:20:17.072Z",
          "source": "scalekit",
          "object": "directory_user",
          "data": {
            // Event Data
          },
          "old_data": {
            // Old data of the object whenever applicable.
          }
        }
        ```
        </CodeWithHeader>
    </div>

</div>

<IntersectingHeader id="tag/Webhooks/scalekit.dir.user.create" title="scalekit.dir.user.create" subheading="true" classList='ApiCategoryList webhook method'/>
<div className="row section">
    <div className="col col--6">
       This webhook is triggered when a new directory user is created.
       <ul className="ApiReference-Parameters">
            <li className="ApiReference-Parameter header">Event Data</li>
            <Parameter attrKey="id" type="string" description="Unique ID of the Directory User." />
            <Parameter attrKey="organization_id" type="string" description="Unique ID of the Organization to which this directory user belongs." />
            <Parameter attrKey="dp_id" type="string" description="Unique ID of the User in the Directory Provider (IdP) system." />
            <Parameter attrKey="preferrred_username" type="string" description="Preferred username of the directory user." />
            <Parameter attrKey="email" type="string" description="Email of the directory user." />
            <Parameter attrKey="active" type="boolean" description="Indicates if the directory user is active." />
            <Parameter attrKey="name" type="string" description="Fully formatted name of the directory user." />
            <Parameter attrKey="roles" type="array" description="Array of roles assigned to the directory user.">
                <details>
                    <summary>Child Attributes</summary>
                    <Parameter attrKey="role" type="string" description="Role of the directory user." />
                    <Parameter attrKey="name" type="string" description="Name of the directory user." />
                </details>
            </Parameter>
            <Parameter attrKey="groups" type="array" description="Array of groups to which the directory user belongs.">
                <details>
                    <summary>Child Attributes</summary>
                    <Parameter attrKey="id" type="string" description="ID of the directory group." />
                    <Parameter attrKey="name" type="string" description="Name of the directory group." />
                </details>
            </Parameter>
            <Parameter attrKey="given_name" type="string" description="Given name of the directory user." />
            <Parameter attrKey="family_name" type="string" description="Family name of the directory user." />
            <Parameter attrKey="nickname" type="string" description="Nickname of the directory user." />
            <Parameter attrKey="picture" type="string" description="URL of the directory user's profile picture." />
            <Parameter attrKey="phone_number" type="string" description="Phone number of the directory user." />
            <Parameter attrKey="address" type="object" description="Address of the directory user.">
                <details>
                    <summary>Child Attributes</summary>
                    <Parameter attrKey="postal_code" type="string" description="Postal code of the directory user address." />
                    <Parameter attrKey="state" type="string" description="State of the directory user address." />
                    <Parameter attrKey="formatted" type="string" description="Formatted address of the directory user." />
                </details>
            </Parameter>
            <Parameter attrKey="custom_attributes" type="object" description="Custom attributes of the directory user." />
            <Parameter attrKey="raw_attributes" type="object" description="Raw attributes of the directory user as received from the Directory Provider (IdP)." />
        </ul>
    </div>
    <div className="col col--6">
        <CodeWithHeader title="scalekit.dir.user.create">

        ```json
        {
          "event_spec_ver": "1",
          "category": "dir",
          "type": "scalekit.dir.user.create",
          "occured_at": "2024-08-21T10:20:17.072Z",
          "source": "scalekit",
          "object": "directory_user",
          "data": {
            "id": "diruser_12312312312312",
            "organization_id": "org_12312312312312",
            "dp_id": "<scim_external_id>",
            "preferrred_username": "<idp_user_name>",
            "email": "john.doe@example.com",
            "active": true,
            "name": "John Doe",
            "roles": [
              {
                "role": "billing_admin",
                "name": "Billing Admin"
              }
            ],
            "groups": [
              {
                "id": "dirgroup_12312312312312",
                "name": "Group Name"
              }
            ],
            "given_name": "John",
            "family_name": "Doe",
            "nickname": "Jhonny boy",
            "picture": "https://image.com/profile.jpg",
            "phone_number": "1234567892",
            "address": {
              "postal_code": "64112",
              "state": "Missouri",
              "formatted": "123, Oxford Lane, Kansas City, Missouri, 64112"
            },
            "custom_attributes": {
              "attribute1": "value1",
              "attribute2": "value2"
            },
            "raw_attributes": {
              // SCIM payload
            }
          }
        }
        ```
        </CodeWithHeader>
    </div>

</div>

<IntersectingHeader id="tag/Webhooks/scalekit.dir.user.update" title="scalekit.dir.user.update" subheading="true" classList='ApiCategoryList webhook method'/>
<div className="row section">
    <div className="col col--6">
       This webhook is triggered when a directory user is updated. Usually, directory user data is updated in any of the following scenarios:
       1. User Profile is updated in the Directory Provider (IdP) system.
       2. User is added to or removed from a group.
       3. If [GBAC](/dir-sync/gbac) is enabled, User is assigned or removed from a role based on the group membership.
       <ul className="ApiReference-Parameters">
            <li className="ApiReference-Parameter header">Event Data</li>
            <Parameter attrKey="id" type="string" description="Unique ID of the Directory User." />
            <Parameter attrKey="organization_id" type="string" description="Unique ID of the Organization to which this directory user belongs." />
            <Parameter attrKey="dp_id" type="string" description="Unique ID of the User in the Directory Provider (IdP) system." />
            <Parameter attrKey="preferrred_username" type="string" description="Preferred username of the directory user." />
            <Parameter attrKey="email" type="string" description="Email of the directory user." />
            <Parameter attrKey="active" type="boolean" description="Indicates if the directory user is active." />
            <Parameter attrKey="name" type="string" description="Fully formatted name of the directory user." />
            <Parameter attrKey="roles" type="array" description="Array of roles assigned to the directory user.">
                <details>
                    <summary>Child Attributes</summary>
                    <Parameter attrKey="role" type="string" description="Role of the directory user." />
                    <Parameter attrKey="name" type="string" description="Name of the directory user." />
                </details>
            </Parameter>
            <Parameter attrKey="groups" type="array" description="Array of groups to which the directory user belongs.">
                <details>
                    <summary>Child Attributes</summary>
                    <Parameter attrKey="id" type="string" description="ID of the directory group." />
                    <Parameter attrKey="name" type="string" description="Name of the directory group." />
                </details>
            </Parameter>
            <Parameter attrKey="given_name" type="string" description="Given name of the directory user." />
            <Parameter attrKey="family_name" type="string" description="Family name of the directory user." />
            <Parameter attrKey="nickname" type="string" description="Nickname of the directory user." />
            <Parameter attrKey="picture" type="string" description="URL of the directory user's profile picture." />
            <Parameter attrKey="phone_number" type="string" description="Phone number of the directory user." />
            <Parameter attrKey="address" type="object" description="Address of the directory user.">
                <details>
                    <summary>Child Attributes</summary>
                    <Parameter attrKey="postal_code" type="string" description="Postal code of the directory user address." />
                    <Parameter attrKey="state" type="string" description="State of the directory user address." />
                    <Parameter attrKey="formatted" type="string" description="Formatted address of the directory user." />
                </details>
            </Parameter>
            <Parameter attrKey="custom_attributes" type="object" description="Custom attributes of the directory user." />
            <Parameter attrKey="raw_attributes" type="object" description="Raw attributes of the directory user as received from the Directory Provider (IdP)." />

        </ul>
    </div>
    <div className="col col--6">
        <CodeWithHeader title="scalekit.dir.user.update">

        ```json
        {
          "event_spec_ver": "1",
          "category": "dir",
          "type": "scalekit.dir.user.update",
          "occured_at": "2024-08-21T10:20:17.072Z",
          "source": "scalekit",
          "object": "directory_user",
          "data": {
            "id": "diruser_12312312312312",
            "organization_id": "org_12312312312312",
            "dp_id": "<scim_external_id>",
            "preferrred_username": "<idp_user_name>",
            "email": "john.doe@example.com",
            "active": true,
            "name": "John Doe",
            "roles": [
              {
                "role": "billing_admin",
                "name": "Billing Admin"
              }
            ],
            "groups": [
              {
                "id": "dirgroup_12312312312312",
                "name": "Group Name"
              }
            ],
            "given_name": "John",
            "family_name": "Doe",
            "nickname": "Jhonny boy",
            "picture": "https://image.com/profile.jpg",
            "phone_number": "1234567892",
            "address": {
              "postal_code": "64112",
              "state": "Missouri",
              "formatted": "123, Oxford Lane, Kansas City, Missouri, 64112"
            },
            "custom_attributes": {
              "attribute1": "value1",
              "attribute2": "value2"
            },
            "raw_attributes": {
              // SCIM payload
            }
          },
          "old_data": {
            // Old data of the directory user before the update
          }
        }
        ```
        </CodeWithHeader>
    </div>

</div>

<IntersectingHeader id="tag/Webhooks/scalekit.dir.user.delete" title="scalekit.dir.user.delete" subheading="true" classList='ApiCategoryList webhook method'/>
<div className="row section">
    <div className="col col--6">
       This webhook is triggered when a directory user is deleted.
       <ul className="ApiReference-Parameters">
            <li className="ApiReference-Parameter header">Event Data</li>
            <Parameter attrKey="id" type="string" description="Unique ID of the Directory User." />
            <Parameter attrKey="organization_id" type="string" description="Unique ID of the Organization to which this directory user belongs." />
            <Parameter attrKey="dp_id" type="string" description="Unique ID of the User in the Directory Provider (IdP) system." />
            <Parameter attrKey="email" type="string" description="Email of the directory user." />
        </ul>
    </div>
    <div className="col col--6">
        <CodeWithHeader title="scalekit.dir.user.delete">

        ```json
        {
          "event_spec_ver": "1",
          "category": "dir",
          "type": "scalekit.dir.user.delete",
          "occured_at": "2024-08-21T10:20:17.072Z",
          "source": "scalekit",
          "object": "directory_user",
          "data": {
            "id": "diruser_12312312312312",
            "organization_id": "org_12312312312312",
            "dp_id": "<scim_external_id>",
            "email": "john.doe@example.com"
          }
        }
        ```
        </CodeWithHeader>
    </div>

</div>
