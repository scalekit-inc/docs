"use strict";(self.webpackChunkscalekit_docs=self.webpackChunkscalekit_docs||[]).push([[7357],{48654:(s,e,i)=>{i.r(e),i.d(e,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"m2m/quickstart","title":"M2M quickstart guide","description":"This guide explains how to implement secure machine-to-machine (M2M) authentication using Scalekit. You will learn how to register a third-party client, authenticate its API requests using client credentials, and validate the received access tokens in your API server.","source":"@site/docs/m2m/quickstart.mdx","sourceDirName":"m2m","slug":"/m2m/quickstart","permalink":"/m2m/quickstart","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"displayed_sidebar":"m2mSidebar","pagination_next":null},"sidebar":"m2mSidebar","previous":{"title":"What is M2M authentication?","permalink":"/m2m/overview"}}');var l=i(74848),r=i(28453);const a={displayed_sidebar:"m2mSidebar",pagination_next:null},c="M2M quickstart guide",d={},o=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Register an M2M client",id:"register-an-m2m-client",level:2},{value:"Authenticate the M2M client",id:"authenticate-the-m2m-client",level:2},{value:"Validate access tokens in your API server",id:"validate-access-tokens-in-your-api-server",level:2}];function t(s){const e={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...s.components},{CodeWithHeader:i,SimpleCode:n}=e;return i||k("CodeWithHeader",!0),n||k("SimpleCode",!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"m2m-quickstart-guide",children:"M2M quickstart guide"})}),"\n",(0,l.jsx)(e.p,{children:"This guide explains how to implement secure machine-to-machine (M2M) authentication using Scalekit. You will learn how to register a third-party client, authenticate its API requests using client credentials, and validate the received access tokens in your API server."}),"\n",(0,l.jsx)(e.p,{children:"This guide provides code samples to help you integrate Scalekit's M2M authentication into your application."}),"\n",(0,l.jsx)(e.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,l.jsx)(e.p,{children:"Before starting, ensure you have the following:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["A Scalekit account and environment. If you don't have one, ",(0,l.jsx)(e.a,{href:"https://app.scalekit.com/ws/signup",children:"sign up here"}),"."]}),"\n",(0,l.jsx)(e.li,{children:"API credentials for your Scalekit environment."}),"\n",(0,l.jsxs)(e.li,{children:["Familiarity with ",(0,l.jsx)(e.a,{href:"/docs/m2m/authenticate-scalekit-api",children:"authenticating requests to the Scalekit API"}),"."]}),"\n",(0,l.jsxs)(e.li,{children:["(Optional) An understanding of how Scalekit uses ",(0,l.jsx)(e.a,{href:"/m2m/external-ids-and-metadata",children:"Organizations and external identifiers"})," to represent your customers. Each Organization can have multiple M2M clients."]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"This guide does not cover installing or configuring Scalekit itself."}),"\n",(0,l.jsx)(e.h2,{id:"register-an-m2m-client",children:"Register an M2M client"}),"\n",(0,l.jsx)(e.p,{children:"To allow an external system (an API consumer) to securely access your API, you first register it as an M2M client within the relevant Scalekit Organization. This step typically occurs when your customer sets up an integration via their dashboard or a setup process you provide."}),"\n",(0,l.jsxs)(e.p,{children:["Register a new M2M client by making a POST request to the ",(0,l.jsx)(n,{children:"/organizations/{organization_id}/clients"})," endpoint."]}),"\n",(0,l.jsx)(i,{title:"Register an M2M client",children:(0,l.jsx)(e.pre,{className:"shiki shiki-themes one-light github-dark",style:{backgroundColor:"#FAFAFA","--shiki-dark-bg":"#24292e",color:"#383A42","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:(0,l.jsxs)(e.code,{className:"language-sh",children:[(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#4078F2","--shiki-dark":"#B392F0"},children:"curl"}),(0,l.jsx)(e.span,{style:{color:"#986801","--shiki-dark":"#79B8FF"},children:" -L"}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:" 'https://<SCALEKIT_ENVIRONMENT_URL>/api/v1/organizations/<ORGANIZATION_ID>/clients'"}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#79B8FF"},children:" \\"})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"-H "}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:"'Content-Type: application/json'"}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#79B8FF"},children:" \\"})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"-H "}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:"'Authorization: Bearer <SCALEKIT_ACCESS_TOKEN>'"}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#79B8FF"},children:" \\"})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"-d "}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:"'{"})]}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'    "name": "GitHub Actions Deployment Service",'})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'    "description": "Service account for GitHub Actions to deploy applications to production",'})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'    "custom_claims": ['})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:"        {"})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'            "key": "github_repository",'})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'            "value": "acmecorp/inventory-service"'})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:"        },"})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:"        {"})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'            "key": "environment",'})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'            "value": "production_us"'})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:"        }"})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:"    ],"})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'    "scopes": ['})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'        "deploy:applications",'})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'        "read:deployments"'})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:"    ],"})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'    "audience": ['})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'        "deployment-api.acmecorp.com"'})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:"    ],"})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'    "expiry": 3600'})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:"}'"})}),"\n",(0,l.jsx)(e.span,{className:"line"})]})})}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"Parameter"}),(0,l.jsx)(e.th,{children:"Type"}),(0,l.jsx)(e.th,{children:"Required"}),(0,l.jsx)(e.th,{children:"Description"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(n,{children:"name"})}),(0,l.jsx)(e.td,{children:"string"}),(0,l.jsx)(e.td,{children:"Optional"}),(0,l.jsx)(e.td,{children:'A descriptive name for the M2M client (e.g., "GitHub Actions Deployment Service")'})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(n,{children:"description"})}),(0,l.jsx)(e.td,{children:"string"}),(0,l.jsx)(e.td,{children:"Optional"}),(0,l.jsx)(e.td,{children:"A detailed explanation of the client's purpose and usage"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(n,{children:"custom_claims"})}),(0,l.jsx)(e.td,{children:"array"}),(0,l.jsx)(e.td,{children:"Optional"}),(0,l.jsxs)(e.td,{children:["Key-value pairs that provide additional context about the client. Each claim must have a ",(0,l.jsx)(n,{children:"key"})," and ",(0,l.jsx)(n,{children:"value"})," field"]})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(n,{children:"scopes"})}),(0,l.jsx)(e.td,{children:"array"}),(0,l.jsx)(e.td,{children:"Optional"}),(0,l.jsxs)(e.td,{children:['List of permissions the client needs (e.g., ["deploy',":applications",'", "read',":deployments",'"])']})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(n,{children:"audience"})}),(0,l.jsx)(e.td,{children:"array"}),(0,l.jsx)(e.td,{children:"Optional"}),(0,l.jsx)(e.td,{children:'List of API endpoints this client will access (e.g., ["deployment-api.acmecorp.com"])'})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(n,{children:"expiry"})}),(0,l.jsx)(e.td,{children:"number"}),(0,l.jsx)(e.td,{children:"Optional"}),(0,l.jsx)(e.td,{children:"Token expiration time in seconds. Defaults to 3600 (1 hour)"})]})]})]}),"\n",(0,l.jsxs)(e.p,{children:["The API response contains the client details, including the ",(0,l.jsx)(n,{children:"client_id"})," and ",(0,l.jsx)(n,{children:"client_secret"}),"."]}),"\n",(0,l.jsx)(i,{title:"Register an M2M client API response",children:(0,l.jsx)(e.pre,{className:"shiki shiki-themes one-light github-dark",style:{backgroundColor:"#FAFAFA","--shiki-dark-bg":"#24292e",color:"#383A42","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:(0,l.jsxs)(e.code,{className:"language-json",children:[(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"{"})}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'    "client"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:": {"})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'        "client_id"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'"m2morg_68315758685323697"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'        "secrets"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:": ["})]}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"            {"})}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'                "id"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'"sks_68315758802764209"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'                "create_time"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'"2025-04-16T06:56:05.360Z"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'                "update_time"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'"2025-04-16T06:56:05.367190455Z"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'                "secret_suffix"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'"UZ0X"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'                "status"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'"ACTIVE"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'                "last_used_time"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'"2025-04-16T06:56:05.360Z"'})]}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"            }"})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"        ],"})}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'        "name"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'"GitHub Actions Deployment Service"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'        "description"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'"Service account for GitHub Actions to deploy applications to production"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'        "organization_id"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'"org_59615193906282635"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'        "create_time"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'"2025-04-16T06:56:05.290Z"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'        "update_time"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'"2025-04-16T06:56:05.292145150Z"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'        "scopes"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:": ["})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'            "deploy:applications"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'            "read:deployments"'})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"        ],"})}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'        "audience"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:": ["})]}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'            "deployment-api.acmecorp.com"'})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"        ],"})}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'        "custom_claims"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:": ["})]}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"            {"})}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'                "key"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'"github_repository"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'                "value"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'"acmecorp/inventory-service"'})]}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"            },"})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"            {"})}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'                "key"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'"environment"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'                "value"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'"production_us"'})]}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"            }"})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"        ]"})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"    },"})}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'    "plain_secret"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'"test_ly8G57h0ErRJSObJI6dShkoaq6bigo11Dxcfa6reKG1kKNVbqBKW4H5Ctmb5UZ0X"'})]}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"}"})}),"\n",(0,l.jsx)(e.span,{className:"line"})]})})}),"\n",(0,l.jsxs)(e.p,{children:["Note: Scalekit only returns the ",(0,l.jsx)(n,{children:"plain_secret"})," once during client creation and does not store it. Instruct your M2M client developers to store the ",(0,l.jsx)(n,{children:"plain_secret"})," securely."]}),"\n",(0,l.jsx)(e.h2,{id:"authenticate-the-m2m-client",children:"Authenticate the M2M client"}),"\n",(0,l.jsxs)(e.p,{children:["After registration, the M2M client authenticates with your Scalekit environment using its ",(0,l.jsx)(n,{children:"client_id"})," and ",(0,l.jsx)(n,{children:"client_secret"})," (the ",(0,l.jsx)(n,{children:"plain_secret"})," obtained earlier) to request an access token. This process uses the OAuth 2.0 client credentials grant type."]}),"\n",(0,l.jsxs)(e.p,{children:["The client sends a POST request to the ",(0,l.jsx)(n,{children:"/oauth/token"})," endpoint:"]}),"\n",(0,l.jsx)(i,{title:"Authenticate the M2M client",children:(0,l.jsx)(e.pre,{className:"shiki shiki-themes one-light github-dark",style:{backgroundColor:"#FAFAFA","--shiki-dark-bg":"#24292e",color:"#383A42","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:(0,l.jsxs)(e.code,{className:"language-sh",children:[(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#4078F2","--shiki-dark":"#B392F0"},children:"curl"}),(0,l.jsx)(e.span,{style:{color:"#986801","--shiki-dark":"#79B8FF"},children:" -X"}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:" POST"}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#79B8FF"},children:" \\"})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'  "https://<SCALEKIT_ENVIRONMENT_URL>/oauth/token"'}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#79B8FF"},children:" \\"})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#986801","--shiki-dark":"#79B8FF"},children:"  -H"}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:' "Content-Type: application/x-www-form-urlencoded"'}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#79B8FF"},children:" \\"})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#986801","--shiki-dark":"#79B8FF"},children:"  -d"}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:' "grant_type=client_credentials"'}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#79B8FF"},children:" \\"})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#986801","--shiki-dark":"#79B8FF"},children:"  -d"}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:' "client_id=<M2M_CLIENT_ID>"'}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#79B8FF"},children:" \\"})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#986801","--shiki-dark":"#79B8FF"},children:"  -d"}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:' "client_secret=<M2M_CLIENT_SECRET>"'}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#79B8FF"},children:" \\"})]}),"\n",(0,l.jsx)(e.span,{className:"line"})]})})}),"\n",(0,l.jsxs)(e.p,{children:["Refer to ",(0,l.jsx)(e.a,{href:"/docs/m2m/api-auth-for-m2m-clients",children:"API Authentication for M2M clients"})," for detailed information on how M2M clients authenticate."]}),"\n",(0,l.jsx)(e.p,{children:"Upon successful authentication, Scalekit issues a JWT access token."}),"\n",(0,l.jsx)(i,{title:"Access token response",children:(0,l.jsx)(e.pre,{className:"shiki shiki-themes one-light github-dark",style:{backgroundColor:"#FAFAFA","--shiki-dark-bg":"#24292e",color:"#383A42","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:(0,l.jsxs)(e.code,{className:"language-json",children:[(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"{"})}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'  "access_token"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:":"}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'"<M2M_JWT_ACCESS_TOKEN>"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'  "token_type"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:":"}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'"Bearer"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'  "expires_in"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:":"}),(0,l.jsx)(e.span,{style:{color:"#986801","--shiki-dark":"#79B8FF"},children:"86399"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#79B8FF"},children:'  "scope"'}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:":"}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:'"deploy:applications read:deployments"'})]}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"}"})}),"\n",(0,l.jsx)(e.span,{className:"line"})]})})}),"\n",(0,l.jsxs)(e.p,{children:["The client includes this access token in the ",(0,l.jsx)(n,{children:"Authorization"})," header of subsequent requests to your API server."]}),"\n",(0,l.jsx)(e.h2,{id:"validate-access-tokens-in-your-api-server",children:"Validate access tokens in your API server"}),"\n",(0,l.jsx)(e.p,{children:"Your API server must validate the incoming JWT access token to ensure the request originates from a trusted M2M client and that the token is legitimate."}),"\n",(0,l.jsx)(e.p,{children:"Validate the token in two steps:"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Retrieve the Public Key:"})," Fetch the appropriate public key from your Scalekit environment's JSON Web Key Set (JWKS) endpoint. Use the ",(0,l.jsx)(n,{children:"kid"})," (Key ID) from the JWT header to identify the correct key. Cache the key according to standard JWKS practices."]}),"\n"]}),"\n",(0,l.jsx)(i,{title:"Retrieve the public key",children:(0,l.jsx)(e.pre,{className:"shiki shiki-themes one-light github-dark",style:{backgroundColor:"#FAFAFA","--shiki-dark-bg":"#24292e",color:"#383A42","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:(0,l.jsxs)(e.code,{className:"language-js",children:[(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"import"}),(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#E1E4E8"},children:" jwksClient"}),(0,l.jsx)(e.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:" from"}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:" 'jwks-rsa'"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:";"})]}),"\n",(0,l.jsx)(e.span,{className:"line"}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"const"}),(0,l.jsx)(e.span,{style:{color:"#986801","--shiki-dark":"#79B8FF"},children:" client"}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#F97583"},children:" ="}),(0,l.jsx)(e.span,{style:{color:"#4078F2","--shiki-dark":"#B392F0"},children:" jwksClient"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"({"})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#E1E4E8"},children:"  jwksUri"}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#E1E4E8"},children:":"}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:" 'YOUR_JWKS_URI'"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#E1E4E8"},children:"  cache"}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#E1E4E8"},children:":"}),(0,l.jsx)(e.span,{style:{color:"#986801","--shiki-dark":"#79B8FF"},children:" true"})]}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"});"})}),"\n",(0,l.jsx)(e.span,{className:"line"}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"async"}),(0,l.jsx)(e.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:" function"}),(0,l.jsx)(e.span,{style:{color:"#4078F2","--shiki-dark":"#B392F0"},children:" getPublicKey"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"("}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#FFAB70"},children:"header"}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#F97583"},children:":"}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#79B8FF"},children:" any"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:")"}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#F97583"},children:":"}),(0,l.jsx)(e.span,{style:{color:"#C18401","--shiki-dark":"#B392F0"},children:" Promise"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"<"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#79B8FF"},children:"string"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"> {"})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"  return"}),(0,l.jsx)(e.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:" new"}),(0,l.jsx)(e.span,{style:{color:"#C18401","--shiki-dark":"#79B8FF"},children:" Promise"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"(("}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#FFAB70"},children:"resolve"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:", "}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#FFAB70"},children:"reject"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:") "}),(0,l.jsx)(e.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"=>"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:" {"})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"    client."}),(0,l.jsx)(e.span,{style:{color:"#4078F2","--shiki-dark":"#B392F0"},children:"getSigningKey"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"(header."}),(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#E1E4E8"},children:"kid"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:", ("}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#FFAB70"},children:"err"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:", "}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#FFAB70"},children:"key"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:") "}),(0,l.jsx)(e.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"=>"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:" {"})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"      if"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:" (err) "}),(0,l.jsx)(e.span,{style:{color:"#4078F2","--shiki-dark":"#B392F0"},children:"reject"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"(err);"})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"      else"}),(0,l.jsx)(e.span,{style:{color:"#4078F2","--shiki-dark":"#B392F0"},children:" resolve"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"(key."}),(0,l.jsx)(e.span,{style:{color:"#4078F2","--shiki-dark":"#B392F0"},children:"getPublicKey"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"());"})]}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"    });"})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"  });"})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"}"})}),"\n",(0,l.jsx)(e.span,{className:"line"})]})})}),"\n",(0,l.jsxs)(e.ol,{start:"2",children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Verify the Token Signature:"})," Use the retrieved public key and a JWT library to verify the token's signature and claims (like issuer, audience, and expiration)."]}),"\n"]}),"\n",(0,l.jsx)(i,{title:"Verify the token signature",children:(0,l.jsx)(e.pre,{className:"shiki shiki-themes one-light github-dark",style:{backgroundColor:"#FAFAFA","--shiki-dark-bg":"#24292e",color:"#383A42","--shiki-dark":"#e1e4e8"},tabIndex:"0",children:(0,l.jsxs)(e.code,{className:"language-js",children:[(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"import"}),(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#E1E4E8"},children:" jwt"}),(0,l.jsx)(e.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:" from"}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:" 'jsonwebtoken'"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:";"})]}),"\n",(0,l.jsx)(e.span,{className:"line"}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"async"}),(0,l.jsx)(e.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:" function"}),(0,l.jsx)(e.span,{style:{color:"#4078F2","--shiki-dark":"#B392F0"},children:" verifyToken"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"("}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#FFAB70"},children:"token"}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#F97583"},children:":"}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#79B8FF"},children:" string"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:", "}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#FFAB70"},children:"publicKey"}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#F97583"},children:":"}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#79B8FF"},children:" string"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:") {"})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"  try"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:" {"})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"    const"}),(0,l.jsx)(e.span,{style:{color:"#986801","--shiki-dark":"#79B8FF"},children:" decoded"}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#F97583"},children:" ="}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:" jwt."}),(0,l.jsx)(e.span,{style:{color:"#4078F2","--shiki-dark":"#B392F0"},children:"decode"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"(token, { "}),(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#E1E4E8"},children:"complete"}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#E1E4E8"},children:":"}),(0,l.jsx)(e.span,{style:{color:"#986801","--shiki-dark":"#79B8FF"},children:" true"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:" });"})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"    const"}),(0,l.jsx)(e.span,{style:{color:"#986801","--shiki-dark":"#79B8FF"},children:" verified"}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#F97583"},children:" ="}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:" jwt."}),(0,l.jsx)(e.span,{style:{color:"#4078F2","--shiki-dark":"#B392F0"},children:"verify"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"(token, publicKey, {"})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#E1E4E8"},children:"      algorithms"}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#E1E4E8"},children:":"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:" ["}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:"'RS256'"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"],"})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#E1E4E8"},children:"      complete"}),(0,l.jsx)(e.span,{style:{color:"#0184BC","--shiki-dark":"#E1E4E8"},children:":"}),(0,l.jsx)(e.span,{style:{color:"#986801","--shiki-dark":"#79B8FF"},children:" true"})]}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"    });"})}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"    return"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:" verified."}),(0,l.jsx)(e.span,{style:{color:"#E45649","--shiki-dark":"#E1E4E8"},children:"payload"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:";"})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"  } "}),(0,l.jsx)(e.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"catch"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:" (error) {"})]}),"\n",(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:"    throw"}),(0,l.jsx)(e.span,{style:{color:"#A626A4","--shiki-dark":"#F97583"},children:" new"}),(0,l.jsx)(e.span,{style:{color:"#4078F2","--shiki-dark":"#B392F0"},children:" Error"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"("}),(0,l.jsx)(e.span,{style:{color:"#50A14F","--shiki-dark":"#9ECBFF"},children:"'Token verification failed'"}),(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:");"})]}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"  }"})}),"\n",(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#383A42","--shiki-dark":"#E1E4E8"},children:"}"})}),"\n",(0,l.jsx)(e.span,{className:"line"})]})})}),"\n",(0,l.jsxs)(e.p,{children:["Find complete code examples in the ",(0,l.jsx)(e.a,{href:"https://github.dev/scalekit-developers/gists/tree/main/m2m",children:"Scalekit M2M Gists repository"}),"."]}),"\n",(0,l.jsx)(e.p,{children:"If the token verification succeeds, your API server can trust the request's authenticity and proceed with processing it based on the permissions (scopes) encoded within the token."})]})}function h(s={}){const{wrapper:e}={...(0,r.R)(),...s.components};return e?(0,l.jsx)(e,{...s,children:(0,l.jsx)(t,{...s})}):t(s)}function k(s,e){throw new Error("Expected "+(e?"component":"object")+" `"+s+"` to be defined: you likely forgot to import, pass, or provide it.")}},28453:(s,e,i)=>{i.d(e,{R:()=>a,x:()=>c});var n=i(96540);const l={},r=n.createContext(l);function a(s){const e=n.useContext(r);return n.useMemo((function(){return"function"==typeof s?s(e):{...e,...s}}),[e,s])}function c(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(l):s.components||l:a(s.components),n.createElement(r.Provider,{value:e},s.children)}}}]);